"use strict";(self.webpackChunkbooks_shop=self.webpackChunkbooks_shop||[]).push([[735],{922:(e,s,n)=>{n.r(s),n.d(s,{default:()=>x});var o=n(43),c=n(721),t=n(17),a=n(647),i=n(396),r=n(579);const l=function(e){let{book:{author:s,image:n,title:c,level:t,tags:l,shortDescription:d,description:u}}=e;const[p,b]=(0,o.useState)(!1),x="Click to see "+(p?"less":"more...");function h(e){e.stopPropagation(),b(e=>!e)}return(0,r.jsxs)("section",{className:"book-section",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"img-container fancy-background",children:(0,r.jsx)(i.A,{className:"book-image",src:n||a,alt:"Book image"})}),(0,r.jsxs)("div",{className:"book-info fancy-background",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"book-span",children:"Book name: "}),(0,r.jsx)("em",{children:c})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"book-span",children:"Book author: "}),(0,r.jsx)("em",{children:s})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"book-span",children:"Book level: "}),(0,r.jsx)("em",{children:t})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"book-span",children:"Book tags: "}),(0,r.jsx)("em",{children:l.join(", ")})]})]})]}),(0,r.jsxs)("p",{className:"book-description fancy-background",onClick:e=>{h(e)},children:[(0,r.jsx)("span",{className:"book-span",children:"Description: "}),(0,r.jsxs)("span",{children:[p?u:d," "]}),(0,r.jsx)("button",{type:"button",className:"btn-text",onClick:e=>{h(e)},children:x})]})]})};var d=n(640);const u=function(e){let{price:s,amount:n,bookID:c,title:t}=e;const{cart:a,addToCart:i}=(0,d._)(),[l,u]=(0,o.useState)(!0),[p,b]=(0,o.useState)(()=>{const e=a.findIndex(e=>e.id===c);return-1===e?1:a[e].orderedCount});function x(e){u(e>0&&e<=n)}function h(e){const s=e.target.innerText,n=+e.target.value;e.target.value=n,"+"===s?(b(e=>e+1),x(p+1)):"-"===s?(b(e=>e-1),x(p-1)):(b(n),x(n))}return(0,r.jsxs)("section",{className:"order-section fancy-background",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"price-paragr",children:"Price, $"}),(0,r.jsx)("p",{className:"price",children:s})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"count-label",htmlFor:"count",children:"Count"}),(0,r.jsx)("button",{type:"button","aria-label":"Increase count of books",className:"btn-plus btn-effect-3d btn-circle",onClick:h,children:"+"}),(0,r.jsx)("input",{name:"count",className:l?"count":"count invalid-field",id:"count",type:"number",required:!0,step:"1",min:"1",value:p,onInput:h}),(0,r.jsx)("button",{type:"button","aria-label":"Decrease count of books",className:"btn-minus btn-effect-3d btn-circle",onClick:h,children:"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"total-price-paragr",children:"Total price"}),(0,r.jsx)("p",{className:"total-price",children:l?(s*p).toFixed(2):(0,r.jsx)("span",{className:"invalid-text",children:"Error"})})]}),(0,r.jsx)("button",{type:"button",className:"add-button btn-effect-press",disabled:!l,onClick:function(){i(c,p,s,t)},children:"Add to cart"})]})};var p=n(321),b=n(662);const x=function(){console.log("Book-page render");const{bookID:e}=(0,c.g)(),{data:s,loading:n,error:o,refetch:a}=(0,t.A)(`/books/${e}`);return n?(0,r.jsx)(p.A,{type:"named"}):o?(0,r.jsx)(b.A,{error:o,refetch:a}):s&&(0,r.jsxs)("div",{className:"specific-book-container flex",children:[(0,r.jsx)(l,{book:s}),(0,r.jsx)(u,{price:s.price,amount:s.amount,title:s.title,bookID:e})]})}}}]);
//# sourceMappingURL=735.10e58866.chunk.js.map