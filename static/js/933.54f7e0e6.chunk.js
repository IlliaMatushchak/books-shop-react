"use strict";(self.webpackChunkbooks_shop=self.webpackChunkbooks_shop||[]).push([[933],{647:(e,a,t)=>{e.exports=t.p+"static/media/imgNotFound.298b98203c3825c61303.png"},1933:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var s=t(5043),c=t(6476),n=t(4958),r=t(3653),o=t(2555),l=t(3721),i=t(647),u=t(8396),d=t(579);const h=(0,s.memo)(function(e){let{image:a,title:t,author:s,price:c,id:n}=e;return console.log("Render card ".concat(n)),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"book-card fancy-background",children:[(0,d.jsx)("div",{className:"img-container",children:(0,d.jsx)(u.A,{className:"book-img",src:a||i,alt:"Book image"})}),(0,d.jsx)("h2",{children:t}),(0,d.jsx)("p",{children:s}),(0,d.jsxs)("div",{className:"flex card-footer",children:[(0,d.jsxs)("p",{children:["Price: ",c]}),(0,d.jsx)(l.N_,{to:"/specific-book/".concat(n),className:"a-like-btn btn-effect-press",children:"View"})]})]})})}),g=(0,s.memo)(function(e){let{books:a}=e;return console.log("BookList render"),(0,d.jsx)("section",{className:"book-list flex",children:a.map(e=>(0,d.jsx)(h,(0,o.A)({},e),e.id))})});const m=function(e){let{filterValues:{searchValue:a,setSearchValue:t,priceRange:s,setPriceRange:c}}=e;return(0,d.jsxs)("section",{className:"search-section flex fancy-background",children:[(0,d.jsx)("input",{className:"search-by-name",type:"search",name:"searchByName",placeholder:"Search by book name","aria-label":"Search by book name",value:a,onChange:e=>{t(e.target.value)}}),(0,d.jsxs)("select",{title:"Select price range",name:"priceRange",className:"price-range",value:s,onChange:e=>{c(e.target.value)},children:[(0,d.jsx)("option",{value:"[0, 9999]",children:"All prices"}),(0,d.jsx)("option",{value:"[0, 15]",children:"0$ < price < 15$"}),(0,d.jsx)("option",{value:"[15, 30]",children:"15$ < price < 30$"}),(0,d.jsx)("option",{value:"[30, 9999]",children:"price 30$ +"})]})]})};var p=t(321),x=t(1662);const f=function(){console.log("Shop render");const[e,a]=(0,s.useState)(""),[t,o]=(0,s.useState)("[0, 9999]"),l=(0,n.A)(e,500),{data:i,loading:u,error:h,refetch:f}=(0,c.A)({requestFn:r.l.getAll,auto:!0}),j=(0,s.useMemo)(()=>((e,a)=>e&&e.length?(console.log("Filtering"),e.filter(e=>{let{title:t}=e;return t.toLowerCase().includes(a.toLowerCase())})):[])(((e,a)=>{if(!e||!e.length)return[];let t=JSON.parse(a);return e.filter(e=>{let{price:a}=e,s=t[0],c=t[1];return a>s&&a<c})})(i,t),l),[t,l,i]);return u?(0,d.jsx)(p.A,{type:"named"}):h?(0,d.jsx)(x.A,{error:h,refetch:f}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(m,{filterValues:{searchValue:e,setSearchValue:a,priceRange:t,setPriceRange:o}}),(0,d.jsx)(g,{books:j})]})}},3653:(e,a,t)=>{t.d(a,{l:()=>n});var s=t(411);const c="/books",n={async getAll(e){const a=await(e=>s.A.get(c,{signal:e}))(e);return a.data},async getById(e,a){const t=await((e,a)=>s.A.get("".concat(c,"/").concat(e),{signal:a}))(e,a);return t.data},async create(e,a){const t=await((e,a)=>s.A.post(c,e,{signal:a}))(e,a);return t.data},async update(e,a,t){const n=await((e,a,t)=>s.A.put("".concat(c,"/").concat(e),a,{signal:t}))(e,a,t);return n.data},async delete(e,a){const t=await((e,a)=>s.A.delete("".concat(c,"/").concat(e),{signal:a}))(e,a);return t.data}}},4958:(e,a,t)=>{t.d(a,{A:()=>c});var s=t(5043);function c(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const[t,c]=(0,s.useState)(e);return(0,s.useEffect)(()=>{const t=setTimeout(()=>{c(e)},a);return()=>clearTimeout(t)},[e,a]),t}},8396:(e,a,t)=>{t.d(a,{A:()=>l});var s=t(2555),c=t(3986),n=t(5043),r=t(579);const o=["src","alt","className"];const l=function(e){let{src:a,alt:t,className:l}=e,i=(0,c.A)(e,o);const[u,d]=(0,n.useState)(!1),[h,g]=(0,n.useState)(!1);return h?(0,r.jsx)("div",{className:"on-error-fallback flex",children:t}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("img",(0,s.A)((0,s.A)({src:a,alt:t},i),{},{className:"".concat(l," lazy-img ").concat(u?"loaded":""),onLoad:()=>{d(!0)},onError:()=>{g(!0)}}))})}}}]);
//# sourceMappingURL=933.54f7e0e6.chunk.js.map