{"version":3,"file":"static/js/933.fb6d1bdb.chunk.js","mappings":"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","sources":["components/BookCard/BookCard.jsx","containers/BooksList/BooksList.jsx","components/SearchSection/SearchSection.jsx","routes/pages/Shop/Shop.jsx","api/booksApi.js","services/bookService.js","hooks/useDebouncedValue.js","components/LazyImage/LazyImage.jsx"],"sourcesContent":["import { memo } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport imgNotFound from \"../../assets/images/imgNotFound.png\";\r\nimport \"./BookCard.css\";\r\nimport LazyImage from \"../LazyImage/LazyImage\";\r\n\r\nconst BookCard = memo(function BookCard({ image, title, author, price, id }) {\r\n  console.log(`Render card ${id}`);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"book-card fancy-background\">\r\n        <div className=\"img-container\">\r\n          <LazyImage\r\n            className=\"book-img\"\r\n            src={image || imgNotFound}\r\n            alt=\"Book image\"\r\n          />\r\n        </div>\r\n\r\n        <h2>{title}</h2>\r\n        <p>{author}</p>\r\n        <div className=\"flex card-footer\">\r\n          <p>Price: {price}</p>\r\n          <Link\r\n            to={`/specific-book/${id}`}\r\n            className=\"a-like-btn btn-effect-press\"\r\n          >\r\n            View\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default BookCard;\r\n","import { memo } from \"react\";\r\nimport \"./BooksList.css\";\r\nimport BookCard from \"../../components/BookCard/BookCard\";\r\n\r\nconst BooksList = memo(function BooksList({ books }) {\r\n  console.log(\"BookList render\");\r\n  return (\r\n    <section className=\"book-list flex\">\r\n      {books.map((book) => {\r\n        return <BookCard key={book.id} {...book} />;\r\n      })}\r\n    </section>\r\n  );\r\n});\r\n\r\nexport default BooksList;\r\n","import \"./SearchSection.css\";\r\n\r\nfunction SearchSection({\r\n  filterValues: { searchValue, setSearchValue, priceRange, setPriceRange },\r\n}) {\r\n  return (\r\n    <section className=\"search-section flex fancy-background\">\r\n      <input\r\n        className=\"search-by-name\"\r\n        type=\"search\"\r\n        name=\"searchByName\"\r\n        placeholder=\"Search by book name\"\r\n        aria-label=\"Search by book name\"\r\n        value={searchValue}\r\n        onChange={(e) => {\r\n          setSearchValue(e.target.value);\r\n        }}\r\n      />\r\n\r\n      <select\r\n        title=\"Select price range\"\r\n        name=\"priceRange\"\r\n        className=\"price-range\"\r\n        value={priceRange}\r\n        onChange={(e) => {\r\n          setPriceRange(e.target.value);\r\n        }}\r\n      >\r\n        <option value=\"[0, 9999]\">All prices</option>\r\n        <option value=\"[0, 15]\">{\"0$ < price < 15$\"}</option>\r\n        <option value=\"[15, 30]\">{\"15$ < price < 30$\"}</option>\r\n        <option value=\"[30, 9999]\">{\"price 30$ +\"}</option>\r\n      </select>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default SearchSection;\r\n","import { useState, useMemo } from \"react\";\r\nimport useControlledFetch from \"../../../hooks/useControlledFetch\";\r\nimport useDebouncedValue from \"../../../hooks/useDebouncedValue\";\r\nimport { BookService } from \"../../../services/bookService\";\r\n\r\nimport BookList from \"../../../containers/BooksList/BooksList\";\r\nimport SearchSection from \"../../../components/SearchSection/SearchSection\";\r\nimport Loader from \"../../../components/Loader/Loader\";\r\nimport ErrorFallback from \"../../../components/ErrorFallback/ErrorFallback\";\r\n\r\nconst filterBooksByPriceRange = (books, range) => {\r\n  if (!books || !books.length) {\r\n    return [];\r\n  }\r\n  let priceRange = JSON.parse(range);\r\n  let filteredBooks = books.filter(({ price }) => {\r\n    let minPrice = priceRange[0],\r\n      maxPrice = priceRange[1];\r\n    return price > minPrice && price < maxPrice;\r\n  });\r\n\r\n  return filteredBooks;\r\n};\r\n\r\nconst filterBooksByName = (books, name) => {\r\n  if (!books || !books.length) {\r\n    return [];\r\n  }\r\n  console.log(\"Filtering\");\r\n  let filteredBooks = books.filter(({ title }) => {\r\n    return title.toLowerCase().includes(name.toLowerCase());\r\n  });\r\n\r\n  return filteredBooks;\r\n};\r\n\r\nfunction Shop() {\r\n  console.log(\"Shop render\");\r\n\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n  const [priceRange, setPriceRange] = useState(\"[0, 9999]\");\r\n  const debouncedSearchValue = useDebouncedValue(searchValue, 500);\r\n  const {\r\n    data: books,\r\n    loading,\r\n    error,\r\n    refetch,\r\n  } = useControlledFetch({ requestFn: BookService.getAll, auto: true });\r\n\r\n  // console.time(\"filter\");\r\n  const filteredBooks = useMemo(() => {\r\n    return filterBooksByName(\r\n      filterBooksByPriceRange(books, priceRange),\r\n      debouncedSearchValue\r\n    );\r\n  }, [priceRange, debouncedSearchValue, books]);\r\n  // console.timeEnd(\"filter\");\r\n\r\n  if (loading) {\r\n    return <Loader type=\"named\" />;\r\n  }\r\n  if (error) {\r\n    return <ErrorFallback error={error} refetch={refetch} />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <SearchSection\r\n        filterValues={{\r\n          searchValue,\r\n          setSearchValue,\r\n          priceRange,\r\n          setPriceRange,\r\n        }}\r\n      />\r\n      <BookList books={filteredBooks} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Shop;\r\n","import axiosInstance from \"./axiosInstance\";\r\n\r\nconst API_URL = \"/api/books\";\r\n\r\nexport const getAllBooksApi = (signal) => {\r\n  return axiosInstance.get(API_URL, { signal });\r\n};\r\n\r\nexport const getBookByIdApi = (id, signal) => {\r\n  return axiosInstance.get(`${API_URL}/${id}`, { signal });\r\n};\r\n\r\nexport const createBookApi = (bookData, signal) => {\r\n  return axiosInstance.post(API_URL, bookData, { signal });\r\n};\r\n\r\nexport const updateBookApi = (id, bookData, signal) => {\r\n  return axiosInstance.put(`${API_URL}/${id}`, bookData, { signal });\r\n};\r\n\r\nexport const deleteBookApi = (id, signal) => {\r\n  return axiosInstance.delete(`${API_URL}/${id}`, { signal });\r\n};\r\n","import {\r\n  getAllBooksApi,\r\n  getBookByIdApi,\r\n  createBookApi,\r\n  updateBookApi,\r\n  deleteBookApi,\r\n} from \"../api/booksApi\";\r\n\r\nexport const BookService = {\r\n  async getAll(signal) {\r\n    const response = await getAllBooksApi(signal);\r\n    return response.data;\r\n  },\r\n\r\n  async getById(id, signal) {\r\n    const response = await getBookByIdApi(id, signal);\r\n    return response.data;\r\n  },\r\n\r\n  async create(product, signal) {\r\n    const response = await createBookApi(product, signal);\r\n    return response.data;\r\n  },\r\n\r\n  async update(id, product, signal) {\r\n    const response = await updateBookApi(id, product, signal);\r\n    return response.data;\r\n  },\r\n\r\n  async delete(id, signal) {\r\n    const response = await deleteBookApi(id, signal);\r\n    return response.data;\r\n  },\r\n};\r\n","import { useState, useEffect } from \"react\";\r\n\r\nexport default function useDebouncedValue(value, delay = 500) {\r\n  const [debounced, setDebounced] = useState(value);\r\n\r\n  useEffect(() => {\r\n    const handler = setTimeout(() => {\r\n      setDebounced(value);\r\n    }, delay);\r\n\r\n    return () => clearTimeout(handler);\r\n  }, [value, delay]);\r\n\r\n  return debounced;\r\n}\r\n","import { useState } from \"react\";\r\nimport \"./LazyImage.css\";\r\n\r\nfunction LazyImage({src, alt, className, ...otherProps}) {\r\n  const [isImgLoaded, setIsImgLoaded] = useState(false);\r\n  const [isError, setIsError] = useState(false);\r\n  // console.log(\"Img render\");\r\n  if(isError){\r\n    return <div className=\"on-error-fallback flex\">{alt}</div>\r\n  } \r\n  return (\r\n    <>  \r\n        <img\r\n          src={src}\r\n          alt={alt}\r\n          {...otherProps}\r\n          className={`${className} lazy-img ${isImgLoaded ? \"loaded\" : \"\"}`}\r\n          onLoad={() => {\r\n            // console.log(\"Img loaded\");\r\n            setIsImgLoaded(true);\r\n          }}\r\n          onError={() => {\r\n            // console.error(\"Img loading error\");\r\n            setIsError(true);\r\n          }}\r\n        />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LazyImage;"],"names":["memo","_ref","image","title","author","price","id","console","log","concat","_jsx","_Fragment","children","_jsxs","className","LazyImage","src","imgNotFound","alt","Link","to","books","map","book","BookCard","_objectSpread","filterValues","searchValue","setSearchValue","priceRange","setPriceRange","type","name","placeholder","value","onChange","e","target","useState","debouncedSearchValue","useDebouncedValue","data","loading","error","refetch","useControlledFetch","requestFn","BookService","getAll","auto","filteredBooks","useMemo","filterBooksByName","length","filter","_ref2","toLowerCase","includes","filterBooksByPriceRange","range","JSON","parse","minPrice","maxPrice","Loader","ErrorFallback","SearchSection","BookList","API_URL","signal","response","axiosInstance","get","getAllBooksApi","getById","getBookByIdApi","create","product","createBookApi","bookData","post","update","updateBookApi","put","delete","deleteBookApi","delay","arguments","undefined","debounced","setDebounced","useEffect","handler","setTimeout","clearTimeout","otherProps","_objectWithoutProperties","_excluded","isImgLoaded","setIsImgLoaded","isError","setIsError","onLoad","onError"],"sourceRoot":""}