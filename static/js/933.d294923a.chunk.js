"use strict";(self.webpackChunkbooks_shop=self.webpackChunkbooks_shop||[]).push([[933],{647:(e,a,t)=>{e.exports=t.p+"static/media/imgNotFound.298b98203c3825c61303.png"},1933:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var s=t(5043),r=t(6476),n=t(4958),c=t(3653),l=t(3721),o=t(647),i=t(8396),u=t(579);const d=(0,s.memo)(function(e){let{image:a,title:t,author:s,price:r,id:n}=e;return console.log(`Render card ${n}`),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"book-card fancy-background",children:[(0,u.jsx)("div",{className:"img-container",children:(0,u.jsx)(i.A,{className:"book-img",src:a||o,alt:"Book image"})}),(0,u.jsx)("h2",{children:t}),(0,u.jsx)("p",{children:s}),(0,u.jsxs)("div",{className:"flex card-footer",children:[(0,u.jsxs)("p",{children:["Price: ",r]}),(0,u.jsx)(l.N_,{to:`/specific-book/${n}`,className:"a-like-btn btn-effect-press",children:"View"})]})]})})}),h=(0,s.memo)(function(e){let{books:a}=e;return console.log("BookList render"),(0,u.jsx)("section",{className:"book-list flex",children:a.map(e=>(0,u.jsx)(d,{...e},e.id))})});const g=function(e){let{filterValues:{searchValue:a,setSearchValue:t,priceRange:s,setPriceRange:r}}=e;return(0,u.jsxs)("section",{className:"search-section flex fancy-background",children:[(0,u.jsx)("input",{className:"search-by-name",type:"search",name:"searchByName",placeholder:"Search by book name","aria-label":"Search by book name",value:a,onChange:e=>{t(e.target.value)}}),(0,u.jsxs)("select",{title:"Select price range",name:"priceRange",className:"price-range",value:s,onChange:e=>{r(e.target.value)},children:[(0,u.jsx)("option",{value:"[0, 9999]",children:"All prices"}),(0,u.jsx)("option",{value:"[0, 15]",children:"0$ < price < 15$"}),(0,u.jsx)("option",{value:"[15, 30]",children:"15$ < price < 30$"}),(0,u.jsx)("option",{value:"[30, 9999]",children:"price 30$ +"})]})]})};var m=t(321),p=t(1662);const x=function(){console.log("Shop render");const[e,a]=(0,s.useState)(""),[t,l]=(0,s.useState)("[0, 9999]"),o=(0,n.A)(e,500),{data:i,loading:d,error:x,refetch:f}=(0,r.A)({requestFn:c.l.getAll,auto:!0}),j=(0,s.useMemo)(()=>((e,a)=>e&&e.length?(console.log("Filtering"),e.filter(e=>{let{title:t}=e;return t.toLowerCase().includes(a.toLowerCase())})):[])(((e,a)=>{if(!e||!e.length)return[];let t=JSON.parse(a);return e.filter(e=>{let{price:a}=e,s=t[0],r=t[1];return a>s&&a<r})})(i,t),o),[t,o,i]);return d?(0,u.jsx)(m.A,{type:"named"}):x?(0,u.jsx)(p.A,{error:x,refetch:f}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(g,{filterValues:{searchValue:e,setSearchValue:a,priceRange:t,setPriceRange:l}}),(0,u.jsx)(h,{books:j})]})}},3653:(e,a,t)=>{t.d(a,{l:()=>n});var s=t(8248);const r="/books",n={async getAll(e){const a=await(e=>s.A.get(r,{signal:e}))(e);return a.data},async getById(e,a){const t=await((e,a)=>s.A.get(`${r}/${e}`,{signal:a}))(e,a);return t.data},async create(e,a){const t=await((e,a)=>s.A.post(r,e,{signal:a}))(e,a);return t.data},async update(e,a,t){const n=await((e,a,t)=>s.A.put(`${r}/${e}`,a,{signal:t}))(e,a,t);return n.data},async delete(e,a){const t=await((e,a)=>s.A.delete(`${r}/${e}`,{signal:a}))(e,a);return t.data}}},4958:(e,a,t)=>{t.d(a,{A:()=>r});var s=t(5043);function r(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const[t,r]=(0,s.useState)(e);return(0,s.useEffect)(()=>{const t=setTimeout(()=>{r(e)},a);return()=>clearTimeout(t)},[e,a]),t}},8396:(e,a,t)=>{t.d(a,{A:()=>n});var s=t(5043),r=t(579);const n=function(e){let{src:a,alt:t,className:n,...c}=e;const[l,o]=(0,s.useState)(!1),[i,u]=(0,s.useState)(!1);return i?(0,r.jsx)("div",{className:"on-error-fallback flex",children:t}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("img",{src:a,alt:t,...c,className:`${n} lazy-img ${l?"loaded":""}`,onLoad:()=>{o(!0)},onError:()=>{u(!0)}})})}}}]);
//# sourceMappingURL=933.d294923a.chunk.js.map