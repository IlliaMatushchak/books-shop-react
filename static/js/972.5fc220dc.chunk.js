"use strict";(self.webpackChunkbooks_shop=self.webpackChunkbooks_shop||[]).push([[972],{635:(e,r,s)=>{s.r(r),s.d(r,{default:()=>m});var a=s(43),n=s(17);var t=s(721),c=s(647),l=s(396),o=s(579);const i=(0,a.memo)(function(e){let{image:r,title:s,author:a,price:n,id:i}=e;return console.log(`Render card ${i}`),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"book-card fancy-background",children:[(0,o.jsx)("div",{className:"img-container",children:(0,o.jsx)(l.A,{className:"book-img",src:r||c,alt:"Book image"})}),(0,o.jsx)("h2",{children:s}),(0,o.jsx)("p",{children:a}),(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsxs)("p",{children:["Price: ",n]}),(0,o.jsx)(t.N_,{to:`/specific-book/${i}`,className:"a-like-btn btn-effect-press",children:"View"})]})]})})}),u=(0,a.memo)(function(e){let{books:r}=e;return console.log("BookList render"),(0,o.jsx)("section",{className:"book-list flex",children:r.map(e=>(0,o.jsx)(i,{...e},e.id))})});const h=function(e){let{filterValues:{searchValue:r,setSearchValue:s,priceRange:a,setPriceRange:n}}=e;return(0,o.jsxs)("section",{className:"search-section flex fancy-background",children:[(0,o.jsx)("input",{className:"search-by-name",type:"search",name:"searchByName",placeholder:"Search by book name","aria-label":"Search by book name",value:r,onChange:e=>{s(e.target.value)}}),(0,o.jsxs)("select",{title:"Select price range",name:"priceRange",className:"price-range",value:a,onChange:e=>{n(e.target.value)},children:[(0,o.jsx)("option",{value:"[0, 9999]",children:"All prices"}),(0,o.jsx)("option",{value:"[0, 15]",children:"0$ < price < 15$"}),(0,o.jsx)("option",{value:"[15, 30]",children:"15$ < price < 30$"}),(0,o.jsx)("option",{value:"[30, 9999]",children:"price 30$ +"})]})]})};var d=s(321),p=s(662);const m=function(){console.log("Shop render");const[e,r]=(0,a.useState)(""),[s,t]=(0,a.useState)("[0, 9999]"),c=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const[s,n]=(0,a.useState)(e);return(0,a.useEffect)(()=>{const s=setTimeout(()=>{n(e)},r);return()=>clearTimeout(s)},[e,r]),s}(e,500),{data:l,loading:i,error:m,refetch:g}=(0,n.A)("/books"),x=(0,a.useMemo)(()=>((e,r)=>e&&e.length?(console.log("Filtering"),e.filter(e=>{let{title:s}=e;return s.toLowerCase().includes(r.toLowerCase())})):[])(((e,r)=>{if(!e||!e.length)return[];let s=JSON.parse(r);return e.filter(e=>{let{price:r}=e,a=s[0],n=s[1];return r>a&&r<n})})(l,s),c),[s,c,l]);return i?(0,o.jsx)(d.A,{type:"named"}):m?(0,o.jsx)(p.A,{error:m,refetch:g}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h,{filterValues:{searchValue:e,setSearchValue:r,priceRange:s,setPriceRange:t}}),(0,o.jsx)(u,{books:x})]})}}}]);
//# sourceMappingURL=972.5fc220dc.chunk.js.map