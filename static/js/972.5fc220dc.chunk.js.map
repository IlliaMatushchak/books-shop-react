{"version":3,"file":"static/js/972.5fc220dc.chunk.js","mappings":"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","sources":["components/BookCard/BookCard.jsx","containers/BooksList/BooksList.jsx","components/SearchSection/SearchSection.jsx","routes/pages/Shop/Shop.jsx","hooks/useDebouncedValue.js"],"sourcesContent":["import { memo } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport imgNotFound from \"../../assets/images/imgNotFound.png\";\r\nimport \"./BookCard.css\";\r\nimport LazyImage from \"../LazyImage/LazyImage\";\r\n\r\nconst BookCard = memo(function BookCard({ image, title, author, price, id }) {\r\n  console.log(`Render card ${id}`);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"book-card fancy-background\">\r\n        <div className=\"img-container\">\r\n          <LazyImage\r\n            className=\"book-img\"\r\n            src={image || imgNotFound}\r\n            alt=\"Book image\"\r\n          />\r\n        </div>\r\n\r\n        <h2>{title}</h2>\r\n        <p>{author}</p>\r\n        <div className=\"flex\">\r\n          <p>Price: {price}</p>\r\n          <Link\r\n            to={`/specific-book/${id}`}\r\n            className=\"a-like-btn btn-effect-press\"\r\n          >\r\n            View\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default BookCard;\r\n","import { memo } from \"react\";\r\nimport \"./BooksList.css\";\r\nimport BookCard from \"../../components/BookCard/BookCard\";\r\n\r\nconst BooksList = memo(function BooksList({ books }) {\r\n  console.log(\"BookList render\");\r\n  return (\r\n    <section className=\"book-list flex\">\r\n      {books.map((book) => {\r\n        return <BookCard key={book.id} {...book} />;\r\n      })}\r\n    </section>\r\n  );\r\n});\r\n\r\nexport default BooksList;\r\n","import \"./SearchSection.css\";\r\n\r\nfunction SearchSection({\r\n  filterValues: { searchValue, setSearchValue, priceRange, setPriceRange },\r\n}) {\r\n  return (\r\n    <section className=\"search-section flex fancy-background\">\r\n      <input\r\n        className=\"search-by-name\"\r\n        type=\"search\"\r\n        name=\"searchByName\"\r\n        placeholder=\"Search by book name\"\r\n        aria-label=\"Search by book name\"\r\n        value={searchValue}\r\n        onChange={(e) => {\r\n          setSearchValue(e.target.value);\r\n        }}\r\n      />\r\n\r\n      <select\r\n        title=\"Select price range\"\r\n        name=\"priceRange\"\r\n        className=\"price-range\"\r\n        value={priceRange}\r\n        onChange={(e) => {\r\n          setPriceRange(e.target.value);\r\n        }}\r\n      >\r\n        <option value=\"[0, 9999]\">All prices</option>\r\n        <option value=\"[0, 15]\">{\"0$ < price < 15$\"}</option>\r\n        <option value=\"[15, 30]\">{\"15$ < price < 30$\"}</option>\r\n        <option value=\"[30, 9999]\">{\"price 30$ +\"}</option>\r\n      </select>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default SearchSection;\r\n","import React, { useState, useMemo, useEffect } from \"react\";\r\nimport useFetch from \"../../../hooks/useFetch\";\r\nimport useDebouncedValue from \"../../../hooks/useDebouncedValue\";\r\n\r\nimport BookList from \"../../../containers/BooksList/BooksList\";\r\nimport SearchSection from \"../../../components/SearchSection/SearchSection\";\r\nimport Loader from \"../../../components/Loader/Loader\";\r\nimport ErrorFallback from \"../../../components/ErrorFallback/ErrorFallback\";\r\n\r\nconst filterBooksByPriceRange = (books, range) => {\r\n  if (!books || !books.length) {\r\n    return [];\r\n  }\r\n  let priceRange = JSON.parse(range);\r\n  let filteredBooks = books.filter(({ price }) => {\r\n    let minPrice = priceRange[0],\r\n      maxPrice = priceRange[1];\r\n    return price > minPrice && price < maxPrice;\r\n  });\r\n\r\n  return filteredBooks;\r\n};\r\n\r\nconst filterBooksByName = (books, name) => {\r\n  if (!books || !books.length) {\r\n    return [];\r\n  }\r\n  console.log(\"Filtering\");\r\n  let filteredBooks = books.filter(({ title }) => {\r\n    return title.toLowerCase().includes(name.toLowerCase());\r\n  });\r\n\r\n  return filteredBooks;\r\n};\r\n\r\nfunction Shop() {\r\n  console.log(\"Shop render\");\r\n\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n  const [priceRange, setPriceRange] = useState(\"[0, 9999]\");\r\n  const debouncedSearchValue = useDebouncedValue(searchValue, 500);\r\n  const { data: books, loading, error, refetch } = useFetch(\"/books\");\r\n\r\n  // console.time(\"filter\");\r\n  const filteredBooks = useMemo(() => {\r\n    return filterBooksByName(\r\n      filterBooksByPriceRange(books, priceRange),\r\n      debouncedSearchValue\r\n    );\r\n  }, [priceRange, debouncedSearchValue, books]);\r\n  // console.timeEnd(\"filter\");\r\n\r\n  if (loading) {\r\n    return <Loader type=\"named\" />;\r\n  }\r\n  if (error) {\r\n    return <ErrorFallback error={error} refetch={refetch} />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <SearchSection\r\n        filterValues={{\r\n          searchValue,\r\n          setSearchValue,\r\n          priceRange,\r\n          setPriceRange,\r\n        }}\r\n      />\r\n      <BookList books={filteredBooks} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Shop;\r\n","import { useState, useEffect } from \"react\";\r\n\r\nexport default function useDebouncedValue(value, delay = 500) {\r\n  const [debounced, setDebounced] = useState(value);\r\n\r\n  useEffect(() => {\r\n    const handler = setTimeout(() => {\r\n      setDebounced(value);\r\n    }, delay);\r\n\r\n    return () => clearTimeout(handler);\r\n  }, [value, delay]);\r\n\r\n  return debounced;\r\n}\r\n"],"names":["memo","_ref","image","title","author","price","id","console","log","_jsx","_Fragment","children","_jsxs","className","LazyImage","src","imgNotFound","alt","Link","to","books","map","book","BookCard","filterValues","searchValue","setSearchValue","priceRange","setPriceRange","type","name","placeholder","value","onChange","e","target","useState","debouncedSearchValue","delay","arguments","length","undefined","debounced","setDebounced","useEffect","handler","setTimeout","clearTimeout","useDebouncedValue","data","loading","error","refetch","useFetch","filteredBooks","useMemo","filterBooksByName","filter","_ref2","toLowerCase","includes","filterBooksByPriceRange","range","JSON","parse","minPrice","maxPrice","Loader","ErrorFallback","SearchSection","BookList"],"sourceRoot":""}